<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Better Python Command Line Arguments with argparse - Andreas Bergström</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property=og:title content="Better Python Command Line Arguments with argparse"><meta property=og:description content="If you search for information on how to write Python modules that accepts command line arguments, you are very likely to stumble upon sys.argv and getopt() and go with it. But since Python 3.2 there is a better alternative that requires less boilerplate and less re-inventing the wheel: argparse.
Just like getopt() argparse relies on sys.argv but it is more high-level and provides more functionality out of the box. At the core of argparse is the class ArgumentParser, which returns an object that you can use to create the argument interface."><meta property=og:type content=article><meta property=og:url content=https://andreasbergstrom.com/posts/python-argparse/><meta property=article:published_time content=2019-03-05T21:10:21&#43;01:00><meta property=article:modified_time content=2019-03-05T21:10:21&#43;01:00><meta name=twitter:card content=summary><meta name=twitter:title content="Better Python Command Line Arguments with argparse"><meta name=twitter:description content="If you search for information on how to write Python modules that accepts command line arguments, you are very likely to stumble upon sys.argv and getopt() and go with it. But since Python 3.2 there is a better alternative that requires less boilerplate and less re-inventing the wheel: argparse.
Just like getopt() argparse relies on sys.argv but it is more high-level and provides more functionality out of the box. At the core of argparse is the class ArgumentParser, which returns an object that you can use to create the argument interface."><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:500,100,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src=/js/main.js></script></head><body><div class="container wrapper post"><div class=header><h1 class=site-title>Andreas Bergström</h1><div class=site-description><h2>Full Stack Web Developer</h2><nav class="nav social"><ul class=flat><a href=https://github.com/andreas-bergstrom title=Github><i data-feather=github></i></a><a href=https://www.linkedin.com/in/andreaserikbergstrom/ title=LinkedIn><i data-feather=linkedin></i></a><a href=https://stackoverflow.com/users/1202214/andreas-bergstr%c3%b6m title="Stack Overflow"><i data-feather=paperclip></i></a><a href=https://twitter.com/echoandreas title=Twitter><i data-feather=twitter></i></a><a href=mailto:hi@andreasbergstrom.com title="Send email"><i data-feather=mail></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/about-me>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post-header><h1 class=title>Better Python Command Line Arguments with argparse</h1><div class=meta>Posted at &mdash; Mar 5, 2019</div><div class=meta>Tagged with<span class=tag><a href=https://andreasbergstrom.com/tags/python>python</a></span><span class=tag><a href=https://andreasbergstrom.com/tags/command-line>command line</a></span></div></div><div class=markdown><p>If you search for information on how to write Python modules that accepts command line arguments, you are very likely to stumble upon sys.argv and getopt() and go with it. But since Python 3.2 there is a better alternative that requires less boilerplate and less re-inventing the wheel: argparse.</p><p>Just like getopt() argparse relies on sys.argv but it is more high-level and provides more functionality out of the box. At the core of argparse is the class ArgumentParser, which returns an object that you can use to create the argument interface. This interface will automatically provide argument parsing and generate the help text that users expect when using -h or &ndash;help.</p><p>We will start with a simple program that accepts two positional arguments:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00f>import</span> argparse

parser = argparse.ArgumentParser()
parser.add_argument(<span style=color:#a31515>&#34;positional_argument_1&#34;</span>)
parser.add_argument(<span style=color:#a31515>&#34;positional_argument_2&#34;</span>)
args = parser.parse_args()

<span style=color:#00f>print</span>(args.positional_argument_1)</code></pre></td></tr></table></div></div><p>So first a ArgumentParser-object is created, which we then add two (requied) positional arguments to and finally we dispatch the parser. This will then look into sys.argv and figure out how to parse its contents (which is all arguments provided by the user).</p><p>That looks very neat and object-oriented. But we could instead access any positonal arguments directly through sys.argv with much less code:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00f>import</span> sys

<span style=color:#00f>print</span>(sys.argv[1])
<span style=color:green># note: 0 = the name of the script, first positional argument at 1</span></code></pre></td></tr></table></div></div><p>So what is the point of using argparser? Let&rsquo;s look at a more functional example:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00f>import</span> argparse
 
parser = argparse.ArgumentParser()
parser.add_argument(<span style=color:#a31515>&#34;-s&#34;</span>, <span style=color:#a31515>&#34;--string&#34;</span>, required=True,
	help=<span style=color:#a31515>&#34;string to uppercase&#34;</span>)
args = vars(parser.parse_args())
 
<span style=color:#00f>print</span>(f<span style=color:#a31515>&#34;Uppercase of {args[&#39;string&#39;]} is {args[&#39;string&#39;].upper()}&#34;</span>)</code></pre></td></tr></table></div></div><p>Here we can see argparse starts to shine. This time we add an argument as a flag argument instead of positional. It is also set as required and a small help text is provided. This is what is returned if we run the script without any arguments:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>usage: main.py [-h] -s STRING
main.py: error: the following arguments are required: -s/--string</code></pre></div><p>So argparse will automatically make sure all required arguments are provided. And it also displays usage information on what arguments this program expects, something familiar to anyone who has used command line programs. If we provide only the -h flag futher information is shown:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>usage: main.py [-h] -s STRING

optional arguments:
  -h, --help            show this help message and exit
  -s STRING, --string STRING
                        string to uppercase</code></pre></div><p>This format should be even more familiar if you have played around on the command line. And argparse will automatically provide this help interface from the arguments that is specified, we did not have to set anything up ourselves!</p><p>So now we know how to use this program and if we provide -s andreas it will return:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Uppercase of andreas is ANDREAS</code></pre></div><p>For this input sys.argv will contain either [&lsquo;main.py&rsquo;, &lsquo;-s&rsquo;, &lsquo;andreas&rsquo;], or [&lsquo;main.py&rsquo;, &lsquo;&ndash;string&rsquo;, &lsquo;andreas&rsquo;] if we had used the &ndash;string flag instead. But thanks to argparser we no longer have to parse this manually and can ignore all possible edge-cases and order.</p><p>This is just the basics and I plan to cover more advanced usage sometime. The <a href=https://docs.python.org/3.3/library/argparse.html>docs</a> has a more complete reference.</p><p>While argparser only handles arguments sent when starting the program, you can use <a href=https://github.com/prompt-toolkit/python-prompt-toolkit>python-prompt-toolkit</a> to create more interactive command prompts.</p></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='andreasbergstromcom';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="footer wrapper"><nav class=nav><div><a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>