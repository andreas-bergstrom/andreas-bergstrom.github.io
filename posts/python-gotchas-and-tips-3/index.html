<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python Tips and Gotchas #3 - Be more effecient with the REPL - Andreas Bergström</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property=og:title content="Python Tips and Gotchas #3 - Be more effecient with the REPL"><meta property=og:description content="The REPL is certainly one of Python&rsquo;s most unique features. While there are other languages that also provides some kind of interactive prompt, none is as fleshed out as in Python. And while it is easy to get started with, there a few tips that will help you work faster.
Interactive execution of modules and packages Probably the most useful feature of the REPL is the ability to load modules and packages in interactive mode."><meta property=og:type content=article><meta property=og:url content=https://andreasbergstrom.com/posts/python-gotchas-and-tips-3/><meta property=article:published_time content=2019-04-16T16:21:37&#43;01:00><meta property=article:modified_time content=2019-04-16T16:21:37&#43;01:00><meta name=twitter:card content=summary><meta name=twitter:title content="Python Tips and Gotchas #3 - Be more effecient with the REPL"><meta name=twitter:description content="The REPL is certainly one of Python&rsquo;s most unique features. While there are other languages that also provides some kind of interactive prompt, none is as fleshed out as in Python. And while it is easy to get started with, there a few tips that will help you work faster.
Interactive execution of modules and packages Probably the most useful feature of the REPL is the ability to load modules and packages in interactive mode."><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:500,100,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src=/js/main.js></script></head><body><div class="container wrapper post"><div class=header><h1 class=site-title>Andreas Bergström</h1><div class=site-description><h2>Full Stack Web Developer</h2><nav class="nav social"><ul class=flat><a href=https://github.com/andreas-bergstrom title=Github><i data-feather=github></i></a><a href=https://www.linkedin.com/in/andreaserikbergstrom/ title=LinkedIn><i data-feather=linkedin></i></a><a href=https://stackoverflow.com/users/1202214/andreas-bergstr%c3%b6m title="Stack Overflow"><i data-feather=paperclip></i></a><a href=https://twitter.com/echoandreas title=Twitter><i data-feather=twitter></i></a><a href=mailto:hi@andreasbergstrom.com title="Send email"><i data-feather=mail></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/about-me>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post-header><h1 class=title>Python Tips and Gotchas #3 - Be more effecient with the REPL</h1><div class=meta>2019-04-04 - 619 words - 3 minutes to read</div><div class=meta>Tagged with<span class=tag><a href=https://andreasbergstrom.com/tags/python>python</a></span><span class=tag><a href=https://andreasbergstrom.com/tags/repl>repl</a></span><span class=tag><a href=https://andreasbergstrom.com/tags/tips-and-gotchas>tips-and-gotchas</a></span></div></div><div class=markdown><p>The REPL is certainly one of Python&rsquo;s most unique features. While there are other languages that also provides some kind of interactive prompt, none is as fleshed out as in Python. And while it is easy to get started with, there a few tips that will help you work faster.</p><h3 id=interactive-execution-of-modules-and-packages>Interactive execution of modules and packages</h3><p>Probably the most useful feature of the REPL is the ability to load modules and packages in interactive mode. This is essentially the same as just doing <strong><em>import module_name</em></strong> while in the REPL, but this can also be done when launching the REPL. Simply use the -i flag and provide the name of the module or package (the package most be executable, in other words contain a <strong>main</strong>.py file):</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>python3 -i filename.py
&gt;&gt;&gt; locals()
{<span style=color:#a31515>&#39;__name__&#39;</span>: <span style=color:#a31515>&#39;__main__&#39;</span>, <span style=color:#a31515>&#39;__doc__&#39;</span>: None, <span style=color:#a31515>&#39;__package__&#39;</span>: None, <span style=color:#a31515>&#39;__loader__&#39;</span>: &lt;_frozen_importlib_external.SourceFileLoader object at 0x10e02c630&gt;, <span style=color:#a31515>&#39;__spec__&#39;</span>: None, <span style=color:#a31515>&#39;__annotations__&#39;</span>: {}, <span style=color:#a31515>&#39;__builtins__&#39;</span>: &lt;module <span style=color:#a31515>&#39;builtins&#39;</span> (built-<span style=color:#00f>in</span>)&gt;, <span style=color:#a31515>&#39;__cached__&#39;</span>: None, <span style=color:#a31515>&#39;lst&#39;</span>: [1, 2, 3, 4, 5]}
&gt;&gt;&gt; lst <span style=color:green># imported from provided module at start</span>
[1, 2, 3, 4, 5]</code></pre></div><p>If the module/package relies on a venv you obviosly need to activate that venv before launching the REPL. Also note that you can only provide one module or package with the -i flag, any futher arguments following the first will be ignored.</p><h3 id=passing-arguments-to-the-repl>Passing arguments to the REPL</h3><p>Another sometimes useful feature is the ability to pass regular arguments to the REPL, just as is possible when executing Python-files. This allows you to for example pipe information from bash in to your REPL-session. These arguments become available through sys.argv just as when executing a file:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>python3 - arg1 arg2 arg3
Python 3.7.2 (v3.7.2:9a3ffc0492, Dec 24 2018, 02:44:43) 
[Clang 6.0 (clang-600.0.57)] on darwin
Type <span style=color:#a31515>&#34;help&#34;</span>, <span style=color:#a31515>&#34;copyright&#34;</span>, <span style=color:#a31515>&#34;credits&#34;</span> <span style=color:#00f>or</span> <span style=color:#a31515>&#34;license&#34;</span> <span style=color:#00f>for</span> more information.
&gt;&gt;&gt; <span style=color:#00f>import</span> sys; sys.argv
[<span style=color:#a31515>&#39;-&#39;</span>, <span style=color:#a31515>&#39;arg1&#39;</span>, <span style=color:#a31515>&#39;arg2&#39;</span>, <span style=color:#a31515>&#39;arg3&#39;</span>]</code></pre></div><p>Or if you prefer <a href=https://andreasbergstrom.com/posts/python-argparse/>argparse</a> just configure it like:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>&gt;&gt;&gt; <span style=color:#00f>import</span> argparse
&gt;&gt;&gt; parser = argparse.ArgumentParser()
&gt;&gt;&gt; parser.add_argument(<span style=color:#a31515>&#39;args&#39;</span>, metavar=<span style=color:#a31515>&#39;N&#39;</span>, type=str, nargs=<span style=color:#a31515>&#39;+&#39;</span>, help=<span style=color:#a31515>&#39;arguments&#39;</span>)
_StoreAction(option_strings=[], dest=<span style=color:#a31515>&#39;args&#39;</span>, nargs=<span style=color:#a31515>&#39;+&#39;</span>, const=None, default=None, type=&lt;<span style=color:#00f>class</span> <span>&#39;</span><span style=color:#2b91af>str</span><span style=color:#a31515>&#39;&gt;, choices=None, help=&#39;</span>arguments<span style=color:#a31515>&#39;, metavar=&#39;</span>N<span style=color:#a31515>&#39;)</span><span>
</span><span></span><span style=color:#a31515>&gt;&gt;&gt; args = vars(parser.parse_args())</span><span>
</span><span></span><span style=color:#a31515>&gt;&gt;&gt; args</span><span>
</span><span></span><span style=color:#a31515>{&#39;</span>args<span style=color:#a31515>&#39;: [&#39;</span>arg1<span style=color:#a31515>&#39;, &#39;</span>arg2<span style=color:#a31515>&#39;, &#39;</span>arg3<span style=color:#a31515>&#39;]}</span></code></pre></div><p>One useful example is if you need the contents of a SSH-key in the REPL:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>python3 - <span>$</span>(cat ~/.ssh/id_rsa.pub)
Python 3.7.2 (v3.7.2:9a3ffc0492, Dec 24 2018, 02:44:43) 
[Clang 6.0 (clang-600.0.57)] on darwin
Type <span style=color:#a31515>&#34;help&#34;</span>, <span style=color:#a31515>&#34;copyright&#34;</span>, <span style=color:#a31515>&#34;credits&#34;</span> <span style=color:#00f>or</span> <span style=color:#a31515>&#34;license&#34;</span> <span style=color:#00f>for</span> more information.
&gt;&gt;&gt; <span style=color:#00f>import</span> sys;sys.argv
[<span style=color:#a31515>&#39;-&#39;</span>, <span style=color:#a31515>&#39;ssh-rsa&#39;</span>, <span style=color:#a31515>&#39;AAAAB3NzaC1yc2EAAAADAQABA...</span></code></pre></div><h3 id=use-underscore-instead-of-temporary-variables>Use underscore instead of temporary variables</h3><p>Often when the REPL is used to experiment you will need to juggle values back and forth. In those scenarios it is common to create a lot of temporary variables just to keep the result of the last command around. But there is actually an easy way to do that without creating variables left and right.</p><p>All expressions evaluated in the REPL return a value, and if that value is <strong>not</strong> None it will actually automatically be stored in a built-in variable. If you have done Python programming for some time you might have come across the best-practice of using _ for throw-away variables, most commonly in for-loops with ranges. In the REPL _ serves a different purpose:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>&gt;&gt;&gt; 1 + 2
3
&gt;&gt;&gt; _
3
&gt;&gt;&gt; _ + 3
6
&gt;&gt;&gt; _
6
&gt;&gt;&gt; a = 1 + 2
&gt;&gt;&gt; _
6</code></pre></div><p>Pay attention to the last lines, where the result of an addition operation is assigned to a but _ still contains 6 since the assignment expression returned None.</p><p>You can still use _ as a variable name and assign it normally, but that will cancel its default behaviour. To reset it, just run <strong>del _</strong>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>&gt;&gt;&gt; 1 + 1
2
&gt;&gt;&gt; _
2
&gt;&gt;&gt; _ = <span style=color:#a31515>&#39;test&#39;</span>
&gt;&gt;&gt; 1 + 2
3
&gt;&gt;&gt; _
<span style=color:#a31515>&#39;test&#39;</span>
&gt;&gt;&gt; <span style=color:#00f>del</span> _
&gt;&gt;&gt; 5 + 5
10
&gt;&gt;&gt; _
10</code></pre></div></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='andreasbergstromcom';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="footer wrapper"><nav class=nav><div>Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(100897614);</script><script async src=//static.getclicky.com/js></script></body></html>